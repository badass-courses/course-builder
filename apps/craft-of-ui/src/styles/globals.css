@import '@code-hike/mdx/dist/index.css' layer(base);
@import './primary-newsletter-cta.css' layer(utilities);
@import './tip-newsletter-cta.css' layer(utilities);
@import './login.css' layer(utilities);
@import './commerce.css' layer(utilities);

@import 'tailwindcss';

@config '../../tailwind.config.ts';

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
	*,
	::after,
	::before,
	::backdrop,
	::file-selector-button {
		border-color: var(--color-gray-200, currentcolor);
	}
}

@layer base {
	:root {
		--nav-height: 80px;
		--command-bar-height: 2.25rem;
		--pane-layout-height: calc(
			100vh - var(--nav-height) - var(--command-bar-height)
		);
		--code-editor-layout-height: calc(
			100vh - var(--nav-height) - var(--command-bar-height) - 30px
		);
		--background: 0 0% 98%;
		--foreground: 240 2% 20%;
		--card: 0 0% 100%;
		--card-foreground: 240 2% 20%;
		--popover: 0 0% 100%;
		--popover-foreground: 240 10% 3.9%;
		--primary: 0 84.2% 60.2%;
		--primary-foreground: 0 0% 100%;
		--secondary: 240 4.8% 95.9%;
		--secondary-foreground: 240 5.9% 10%;
		--muted: 0 0% 89%;
		--muted-foreground: 240 3.8% 46.1%;
		--accent: 240 4.8% 95.9%;
		--accent-foreground: 240 5.9% 10%;
		--destructive: 0 84.2% 60.2%;
		--destructive-foreground: 0 0% 98%;
		--border: 240 0% 89%;
		--input: 240 0% 87%;
		--ring: 240 2% 20%;
		--radius: 0.5rem;
		--chart-1: 12 76% 61%;
		--chart-2: 173 58% 39%;
		--chart-3: 197 37% 24%;
		--chart-4: 43 74% 66%;
		--chart-5: 27 87% 67%;
		color-scheme: light;

		/* imported */
		--header-height: 80px;
		--content: 600px;
		--gutter: 1.5rem;
		--font-size-min: 14;
		--font-size-max: 18;
		--font-ratio-min: 1.2;
		--font-ratio-max: 1.33;
		--font-width-min: 375;
		--font-width-max: 1500;
		--breakpoint-lg: 968px;
		--color-red-400: oklch(0.704 0.191 22.216);
		--color-red-500: oklch(0.637 0.237 25.331);
		--color-red-600: oklch(0.637 0.237 25.331);
		--color-red-800: oklch(0.444 0.177 26.899);
		--red-600: oklch(0.637 0.237 25.331);
		--color-green-200: oklch(0.925 0.084 155.995);
		--color-green-600: oklch(0.627 0.194 149.214);
		--color-green-800: oklch(0.448 0.119 151.328);
		--color-gray-100: oklch(0.967 0.003 264.542);
		--color-gray-200: oklch(0.928 0.006 264.531);
		--color-gray-300: oklch(0.872 0.01 258.338);
		--color-gray-400: oklch(0.707 0.022 261.325);
		--color-gray-500: oklch(0.551 0.027 264.364);
		--color-gray-800: oklch(0.278 0.033 256.848);
		--color-gray-900: oklch(0.21 0.034 264.665);
		--color-white: #fff;

		/* codehike theme */
		--ch-0: light;
		--ch-1: #6e7781;
		--ch-2: #0550ae;
		--ch-3: #953800;
		--ch-4: #24292f;
		--ch-5: #8250df;
		--ch-6: #116329;
		--ch-7: #cf222e;
		--ch-8: #0a3069;
		--ch-9: #82071e;
		--ch-10: #f6f8fa;
		--ch-11: #ffebe9;
		--ch-12: #dafbe1;
		--ch-13: #ffd8b5;
		--ch-14: #eaeef2;
		--ch-15: #57606a;
		--ch-16: #ffffff;
		--ch-17: #eaeef280;
		--ch-18: #fdff0033;
		--ch-19: #1a85ff;
		--ch-20: #add6ff;
		--ch-21: #0969da;
		--ch-22: #f6f8fa;
		--ch-23: #d0d7de;
		--ch-24: #8c959f;
		--ch-25: #afb8c133;
		--ch-26: #ffffffe6;

		.cm-scroller {
			color-scheme: light;
			@apply scrollbar-thin;
		}
	}

	.dark {
		--background: 240 3% 9%;
		--foreground: 240 7% 91%;
		--card: 240 3% 13%;
		--card-foreground: 0 0% 98%;
		--popover: 240 10% 3.9%;
		--popover-foreground: 0 0% 98%;
		--primary: 0 84.2% 60.2%;
		--primary-foreground: 0 0% 100%;
		--secondary: 240 3.7% 15.9%;
		--secondary-foreground: 0 0% 98%;
		--muted: 240 5% 10%;
		--muted-foreground: 240 7% 91%;
		--accent: 240 3.7% 15.9%;
		--accent-foreground: 0 0% 98%;
		--destructive: 0 62.8% 30.6%;
		--destructive-foreground: 0 0% 98%;
		--border: 240 5% 18%;
		--input: 240 5% 20%;
		--ring: 240 7% 91%;
		--chart-1: 220 70% 50%;
		--chart-2: 160 60% 45%;
		--chart-3: 30 80% 55%;
		--chart-4: 280 65% 60%;
		--chart-5: 340 75% 55%;
		color-scheme: dark;
		.cm-scroller {
			color-scheme: dark;
			@apply scrollbar-thin;
		}
	}
	/* codehike theme */
	.dark {
		--ch-0: dark;
		--ch-1: #8b949e;
		--ch-2: #79c0ff;
		--ch-3: #ffa657;
		--ch-4: #c9d1d9;
		--ch-5: #d2a8ff;
		--ch-6: #7ee787;
		--ch-7: #ff7b72;
		--ch-8: #a5d6ff;
		--ch-9: #ffa198;
		--ch-10: #f0f6fc;
		--ch-11: #490202;
		--ch-12: #04260f;
		--ch-13: #5a1e02;
		--ch-14: #161b22;
		--ch-15: #8b949e;
		--ch-16: #0d1117;
		--ch-17: #6e76811a;
		--ch-18: #ffffff0b;
		--ch-19: #3794ff;
		--ch-20: #264f78;
		--ch-21: #1f6feb;
		--ch-22: #010409;
		--ch-23: #30363d;
		--ch-24: #6e7681;
		--ch-25: #6e768166;
		--ch-26: #0d1117e6;
	}
}

@layer base {
	* {
		@apply border-border;
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		@apply font-heading text-balance font-bold;
	}

	body {
		background: color-mix(in hsl, #fff, hsl(45 80% 50%) 1%);
		@apply selection:bg-primary selection:text-primary-foreground overflow-x-hidden font-[300] text-[canvasText] antialiased;
		color: color-mix(in hsl, canvasText, canvas 40%);
		font-feature-settings:
			'rlig' 1,
			'calt' 1;
	}

	.dark body {
		background: hsl(210 10% 10%);
	}

	body::before {
		--size: 40px;
		--line: color-mix(in hsl, canvasText, transparent 90%);
		content: '';
		height: 100dvh;
		width: 100vw;
		position: fixed;
		background:
			linear-gradient(90deg, var(--line) 1px, transparent 1px var(--size)) 17px
				50% / var(--size) var(--size),
			linear-gradient(var(--line) 1px, transparent 1px var(--size)) 50% 19px /
				var(--size) var(--size);
		mask: linear-gradient(-30deg, transparent 70%, white);
		top: 0;
		transform-style: flat;
		pointer-events: none;
		z-index: -1;
	}

	.text-fluid {
		--fluid-min: calc(
			var(--font-size-min) * pow(var(--font-ratio-min), var(--font-level, 0))
		);
		--fluid-max: calc(
			var(--font-size-max) * pow(var(--font-ratio-max), var(--font-level, 0))
		);
		--fluid-preferred: calc(
			(var(--fluid-max) - var(--fluid-min)) /
				(var(--font-width-max) - var(--font-width-min))
		);
		--fluid-type: clamp(
			(var(--fluid-min) / 16) * 1rem,
			((var(--fluid-min) / 16) * 1rem) -
				(((var(--fluid-preferred) * var(--font-width-min)) / 16) * 1rem) +
				(var(--fluid-preferred) * var(--variable-unit, 100vi)),
			(var(--fluid-max) / 16) * 1rem
		);
		font-size: var(--fluid-type);
	}
	.mask-content {
		mask-image:
			linear-gradient(
				#0000 var(--start),
				#fff var(--end) calc(100% - var(--header-height)),
				#0000
			),
			linear-gradient(#fff 0 100%);
		mask-position:
			0 50%,
			calc(100vw - var(--gutter)) 0;
		mask-size: calc(100vw - var(--gutter)) 100%;
		mask-repeat: no-repeat;
	}

	html {
		/* scrollbar-gutter: stable; */
	}

	:where(a, button):focus-visible {
		outline: 2px solid var(--color-red-400);
		outline-offset: 2px;
	}

	strong {
		@apply font-[600];
	}

	::selection {
		background: var(--color-red-400);
		color: #fff;
	}

	html[lang] {
		color-scheme: light dark;
		scrollbar-color: light-dark(var(--color-red-400), var(--color-red-500))
			#0000;
		scrollbar-width: thin;
	}
	@media (prefers-reduced-motion: no-preference) {
		.overflow-auto {
			scroll-behavior: smooth;
		}
	}

	html.dark .shiki,
	html.dark .shiki span {
		color: var(--shiki-dark) !important;
		background-color: var(--background) !important;
		/* Optional, if you also want font styles */
		font-style: var(--shiki-dark-font-style) !important;
		font-weight: var(--shiki-dark-font-weight) !important;
		text-decoration: var(--shiki-dark-text-decoration) !important;
	}

	/*
  Hide the second #primary-newsletter-cta only if there are exactly two on the page.
  This is a temporary workaround for duplicate IDs rendered by the framework.
  Ideally, IDs should be uniqueâ€”consider refactoring to use class names or unique IDs.
*/
	section#primary-newsletter-cta + section#primary-newsletter-cta {
		display: none;
	}
}

.md-editor-toolbar-warp {
	@apply bg-background! border-border! border-b!;
}

[data-checklist] {
	@apply pl-0! list-outside;
	li {
		list-style-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE0IDMuMTVMMTMuMyAxLjc1QzcuMjYyIDMuNSA0LjIgNy4zNSA0LjIgNy4zNUwxLjQgNS4yNUwwIDYuNjVMNC4yIDEyLjI1QzcuNDM3IDYuMjEzIDE0IDMuMTUgMTQgMy4xNVoiIGZpbGw9IiM3QzNCRUQiLz4KPC9zdmc+Cg==');
	}
}

@layer signature {
	.sig {
		--duration: 1.4;
		--delay: 0.2;
		--base-delay: calc((var(--duration) + var(--delay)));
		--natty-delay: 0.973125;
		width: 160px;
		rotate: 10deg;
		path {
			--end: 1.025;
			stroke-dasharray: var(--end);
			stroke-dashoffset: var(--end);
			animation: draw calc(var(--path-speed) * 1s)
				calc((var(--base-delay) * 1s) + var(--path-delay, 0) * 1s) ease-in
				forwards;
		}

		:is(.eye, .nose) {
			fill: hsl(0 0% 0% / 0);
			animation:
				draw calc(var(--path-speed) * 1s)
					calc((var(--base-delay) * 1s) + var(--path-delay, 0) * 1s) ease-in
					forwards,
				fill 0.5s calc((var(--base-delay) * 1s) + var(--natty-delay, 0) * 1s)
					forwards;
		}
		.eye {
			transform-box: fill-box;
			transform-origin: 50% 50%;
			animation:
				draw calc(var(--path-speed) * 1s)
					calc((var(--base-delay) * 1s) + var(--path-delay, 0) * 1s) ease-in
					forwards,
				fill 0.5s calc((var(--base-delay) * 1s) + var(--natty-delay, 0) * 1s)
					forwards,
				blink 6s calc((var(--base-delay) * 1s) + var(--natty-delay, 0) * 1s)
					infinite;
		}
	}

	@keyframes fill {
		to {
			fill: currentColor;
		}
	}

	@keyframes draw {
		to {
			stroke-dashoffset: 0;
		}
	}

	@keyframes blink {
		0%,
		46%,
		48%,
		50%,
		100% {
			transform: scaleY(1);
		}
		47%,
		49% {
			transform: scaleY(0.1);
		}
	}
}

@keyframes move {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(100%);
	}
}

@keyframes bear-float-up {
	0% {
		transform: translateY(100%);
		opacity: 1;
	}
	80% {
		opacity: 1;
	}
	100% {
		transform: translateY(-200vh);
		opacity: 0;
	}
}

.animate-bear-float-up {
	animation: bear-float-up 10s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Ensure red button background is applied correctly */
.bg-red-600 {
	background-color: var(--red-600, oklch(0.637 0.237 25.331));
}
